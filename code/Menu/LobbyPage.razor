@using Sandbox.UI;

@page "/multiplayer/race/active";
@attribute [StyleSheet("/Menu/LobbyPage.razor.scss")]
@namespace Bydrive

<root class="flex-col w-100 h-100">
    <div class="header flex-row">
        <div class="button" @onclick=@(() => this.SelectTab(0))>Lobby</div>
        <div class="button @UI.ActiveIf(LobbyManager.IsHost)" @onclick=@(() => this.SelectTab(1))>Setup</div>
    </div>
    <div class="content">
        <tab>
            <div class="side flex-col">
		        <div class="setup flex-col">
			        <div>
				        <label class="name">Players</label>
                        <label class="control">@(LobbyManager.PlayerCount)/@(LobbyManager.MaxPlayerCount)</label>
			        </div>
			        <div>
				        <label class="name">Track</label>
				        <label class="control">@selectedTrack?.Name</label>
			        </div>
                    <div>
                        <label class="name">Vehicle</label>
                        <label class="control">@StartMenu.SelectedVehicle</label>
                    </div>
		        </div>
                <div class="button" @onclick=@(() => this.Navigate("/vehicle"))>Select Vehicle</div>
	        </div>

            <div class="list flex-col">
                <div class="item header">
                    <label class="name">Name</label>
                    <label class="owner">Owner</label>
                </div>
                @if (players != null)
                {
                    @foreach (Player player in players)
                    {
                        <div class="item player">
                            <label class="name">@player.Name</label>
                            <label class="owner">@(player.IsHost ? "Host" : "Racer")</label>
                        </div>
                    }
                }
            </div>
        </tab>
        <tab Index=1>
            <div class="side flex-col">
                <div class="setup flex-col">
			        <div>
				        <label class="name">Player Count</label>
				        <SliderControl class="control" min="2" max="@RaceInformation.MAX_PLAYERCOUNT" step="1" Value:bind=@playerCount ShowTextEntry=@true />
			        </div>
			        <div>
				        <label class="name">Track</label>
				        <label class="control">@selectedTrack?.Name</label>
			        </div>
		        </div>
            </div>
		    <TrackList class="list tracklist" TrackSelected=@OnTrackSelected />
        </tab>
    </div>
    <div class="footer">
        <div class="button" @onclick=@OnClickBack>Back</div>
        <div class="button" @onclick=@OnClickRefresh>Refresh</div>
        <div class="button @UI.ActiveIf(LobbyManager.Instance.LocalPlayer?.IsHost)" @onclick=@OnClickStart>Start</div>
    </div>
</root>