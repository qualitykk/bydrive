@using Sandbox;
@using Sandbox.UI;
@namespace Bydrive
@inherits PanelComponent

<root class="@GetClasses()">
	<div class="title" />
	<div class="button" @onclick=@OnClickResume>Resume</div>
	<div class="button" @onclick=@OnClickRestart>Restart</div>
	<div class="button" @onclick=@OnClickExit>Exit Race</div>
</root>

@code
{
	bool wantsDraw = false;

	public bool ShouldDraw()
	{
		return wantsDraw;
	}

	protected override void OnUpdate()
	{
		base.OnUpdate();
		if(Input.EscapePressed)
		{
			wantsDraw = !wantsDraw;
		}
	}

	private string GetClasses()
	{
		if (ShouldDraw())
			return "active";

		return "";
	}

	void OnClickResume()
	{
		wantsDraw = false;
	}

	void OnClickRestart()
	{
		Race.Setup(true);
		wantsDraw = false;
	}

	void OnClickExit()
	{
		StartMenu.Open();
	}

	protected override int BuildHash()
	{
		return HashCode.Combine(wantsDraw, GetClasses());
	}
}